{"pre_tt": "from flask import Flask, request, jsonify\nfrom pymongo import MongoClient\nfrom bson import ObjectId\nimport json\n\n@app.route('/user/profile/age', methods=['GET'])\ndef get_user_profile_with_age():\n    data = json.loads(request.data)\n    ", "post_tt": "user_profile = db.users.find_one({'_id':", "key": " ObjectId(data['_id'])})", "suffix_pre": "\n", "suffix_post": "\n    if not user_profile:\n        return jsonify({'error': 'User not found'}), 404\n    \n    # Calculate age\n    dob = datetime.strptime(user_profile['date_of_birth'], \"%Y-%m-%d\")\n    age = relativedelta(datetime.now(), dob).years\n    user_profile['_id'] = str(user_profile['_id']) \n    user_profile['age'] = age\n\n    return jsonify(user_profile), 200", "tt_location": "pref", "lang": "py"}
{"pre_tt": "from flask import Flask, request, jsonify\nfrom pymongo import MongoClient\nfrom bson import ObjectId\nimport json\n\n@app.route('/tasks/details/collaborators', methods=['GET'])\ndef get_task_details_including_collaborators():\n    data = json.loads(request.data)\n    ", "post_tt": "task_details = db.tasks.find_one({'_id':", "key": " ObjectId(data['_id'])})", "suffix_pre": "\n", "suffix_post": "\n    if not task_details:\n        return jsonify({'error': 'Task not found'}), 404\n\n    # Fetch collaborator details\n    collaborator_ids = task_details.get('collaborators', [])\n    collaborators = list(db.users.find({'_id': {'$in': [ObjectId(id) for id in collaborator_ids]}}))\n    \n    task_details['collaborators_info'] = [{'_id': str(user['_id']), 'name': user['name']} for user in collaborators]\n    task_details['_id'] = str(task_details['_id'])  \n\n    return jsonify(task_details), 200", "tt_location": "pref", "lang": "py"}
